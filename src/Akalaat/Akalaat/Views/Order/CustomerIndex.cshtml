@model IEnumerable<Akalaat.ViewModels.OrderVM>

<h2>Orders</h2>

<table class="table">
    <thead>
    <tr>
        <th>Date</th>
        <th>Arrival Time</th>
        <th>Total Price</th>
        <th>Total Discount</th>
        <th>Customer</th>
        <th>Items</th>
        <th></th> <!-- For actions -->
    </tr>
    </thead>
    <tbody>
    @foreach (var order in Model)
    {
        <tr>
            <td>@order.DateTime</td>
            <td>@order.ArrivalTime</td>
            <td>@order.TotalPrice</td>
            <td>@order.TotalDiscount</td>
            <td>@order.Customer.UserName</td>
            <td>
                @if (order.Items != null)
                {
                    <ul class="list-group">
                        @foreach (var item in order.Items)
                        {
                            <li>@item.Text</li>
                        }
                    </ul>
                }
                else
                {
                    <p>No Items</p>
                }
            </td> 
            <td>
                <a asp-action="Details" asp-route-id="@order.Id" class="btn btn-info">Details</a>
            </td>
        </tr>
    }
    </tbody>
</table>