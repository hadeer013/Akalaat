@model CartVM
@{
    var count = 0;
}
@* <h2>Cart Checkout</h2> *@
@* *@
@* @if (Model.Items.Count > 0) *@
@* { *@
@*     <div class="row"> *@
@*         @foreach (var item in Model.Items) *@
@*         { *@
@* *@
@*             <div class="col-md-6 mb-4"> *@
@*                 <div class="card"> *@
@*                     <img src="~/Images/@item.Image_URL" class="card-img-top" alt="Image"> *@
@*                     <div class="card-body"> *@
@*                         <h5 class="card-title">@item.Name</h5> *@
@*                         <p class="card-text">@item.Description</p> *@
@*                         <p class="card-text">Price: @item.Price</p> *@
@*                         <p class="card-text">Quantity: @Model.Quantity[count++]</p> *@
@*                     </div> *@
@*                 </div> *@
@*             </div> *@
@*         } *@
@*     </div> *@
@* *@
@*     <div class="row"> *@
@*        @*  <div class="col-md-6"> *@
@*             <button class="btn btn-primary" id="checkoutButton">Checkout</button> *@
@*         </div> *@ 
@*         <form method="post" asp-action="Create" asp-controller="Order"> *@
@*             <input type="hidden" asp-for="SelectedItemS"/> *@
@*             <input type="hidden" asp-for="TotalPrice" /> *@
@*             <div class="col-md-6"> *@
@*                 <button type="submit" class="btn btn-primary" id="checkoutButton">Checkout</button> *@
@*             </div> *@
@*         </form> *@
@*         <div class="col-md-6"> *@
@*             <a asp-controller="ShoppingCart" asp-action="ClearShoppingCart" class="btn btn-secondary">Cancel</a> *@
@*         </div> *@
@*     </div> *@
@* *@
@*     <div class="row"> *@
@*         <div class="col-md-12"> *@
@*             <p>Total Price: @Model.TotalPrice</p> *@
@*         </div> *@
@*     </div> *@
@* } *@
@* else *@
@* { *@
@*     <p>No items in the cart.</p> *@
@* } *@
<section class="h-100 h-custom" style="background-color: #eee;">
  <div class="container py-5 h-100">
    <div class="row d-flex justify-content-center align-items-center h-100">
      <div class="col">
        <div class="card">
          <div class="card-body p-4">

            <div class="row">
              <h5 class="mb-3">
                <a asp-controller="Item" asp-action="IndexToCustomer" class="text-body"><i class="fas fa-long-arrow-alt-left me-2"></i>Continue shopping</a>
              </h5>
              <hr>
              

              <div class="col-lg-12 mb-3">




                @foreach (var item in Model.Items)
                {
                  <div class="card mb-3">
                    <div class="card-body">
                      <div class="d-flex justify-content-between">

                        <div class="d-flex flex-row align-items-center">
                          <div>
                            <img
                              src="~/Images/@item.Image_URL"
                              class="img-fluid rounded-3" alt="Shopping item" style="width: 65px;">
                          </div>
                          <div class="ms-3">
                            <h5>@item.Name</h5>
                            <p class="small mb-0">@item.Description</p>
                          </div>
                        </div >
                        <div class="d-flex flex-row align-items-center">
                          <div style="width: 50px;">
                            <h5 class="fw-normal mb-0"> @Model.Quantity[count++] </h5 >
                          </div >
                          <div style="width: 80px;">
                            <h5 class="mb-0">@item.Price EGP </h5 >
                          </div >
                                                    <a asp-controller="ShoppingCart" asp-action="DeleteItemFromShoppingCart" asp-route-id="@item.Id" class="delete-item"  style="color: #cecece;"><i class="fas fa-trash-alt"></i></a>
                        </div>
                      </div>
                    </div>
                  </div>

                }
              </div >
              <form method = "post" asp-action = "Create" asp-controller = "Order" class ="m-auto" >
                <input type = "hidden" asp-for= "TotalPrice"/>
                <button type = "submit" class ="btn btn-danger w-25  btn-block btn-lg" >
                  <div class ="d-flex justify-content-between" >
                    <span > @Model.TotalPrice EGP </span >
                    <span > Checkout <i class ="fas fa-long-arrow-alt-right ms-2" ></i>
                      </span>
                  </div >
                </button >             
              </form >
            </div >
 
          </div >
        </div >
      </div >
    </div>  
 </div>
  @*   <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
</section>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        document.querySelectorAll('.delete-item').forEach(function (deleteBtn) {
            deleteBtn.addEventListener('click', function (event) {
                event.preventDefault();
                var itemId = deleteBtn.getAttribute('data-item-id');
                var itemElement = document.getElementById('item-' + itemId);
                if (itemElement) {
                    itemElement.style.display = 'none';
                }
            });
        });
    });
</script> *@
